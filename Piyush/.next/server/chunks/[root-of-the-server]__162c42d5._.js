module.exports=[24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},37702,(e,t,r)=>{t.exports=e.x("worker_threads",()=>require("worker_threads"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},54818,40435,e=>{"use strict";var t=e.i(8007);function r(e,r){return t.NextResponse.json({success:!0,data:e,meta:r},{status:200})}function s(e,r=400,n){return t.NextResponse.json({success:!1,error:e,meta:n},{status:r})}async function n(e){return(console.error("API Error:",e),e instanceof Error)?s(e.message,500):s("An unexpected error occurred",500)}e.s(["apiError",()=>s,"apiSuccess",()=>r,"handleApiError",()=>n],54818);let a=new class{tokenCache;config;constructor(e){this.config=e,this.tokenCache=new Map}check(e){let t=Date.now();this.tokenCache.get(e);let r=this.tokenCache.get(e)||[],s=(r=r.filter(e=>t-e<this.config.interval)).length>=this.config.uniqueTokenPerInterval;if(!s&&(r.push(t),this.tokenCache.set(e,r),this.tokenCache.size>500)){let e=this.tokenCache.keys().next().value;e&&this.tokenCache.delete(e)}return{success:!s,limit:this.config.uniqueTokenPerInterval,remaining:Math.max(0,this.config.uniqueTokenPerInterval-r.length),reset:t+this.config.interval}}}({interval:6e4,uniqueTokenPerInterval:20});e.s(["default",0,a],40435)},80636,e=>{"use strict";var t=e.i(66680);let r={randomUUID:t.randomUUID},s=new Uint8Array(256),n=s.length,a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));e.s(["v4",0,function(e,i,o){if(r.randomUUID&&!i&&!e)return r.randomUUID();var c=e,l=o;let h=(c=c||{}).random??c.rng?.()??(n>s.length-16&&((0,t.randomFillSync)(s),n=0),s.slice(n,n+=16));if(h.length<16)throw Error("Random bytes length must be >= 16");if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,i){if((l=l||0)<0||l+16>i.length)throw RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);for(let e=0;e<16;++e)i[l+e]=h[e];return i}return function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(h)}],80636)},28265,e=>{"use strict";class t{cache;threats=["kill","murder","hurt","attack","bomb","shoot","stab","die","burn","destroy"];harassment=["stupid","idiot","ugly","fat","hate","trash","failure","useless","disgusting","creepy"];fraud=["bank","account","password","credit card","transfer","money","urgent","winner","lottery","ssn"];positiveWords=["good","great","awesome","nice","happy","love","excellent","best","wonderful","safe"];negativeWords=["bad","terrible","awful","sad","hate","worst","horrible","dangerous","fail","poor"];constructor(){this.cache=new Map}async analyze(e){if(!e||0===e.trim().length)return this.createEmptyResult();let t=this.getCacheKey(e);if(this.cache.has(t))return this.cache.get(t);let r=this.simpleSentimentAnalysis(e),s=this.detectKeywords(e),n=this.calculateToxicityScore(s,r),a=this.determineCategory(n,s),i={category:a,toxicityScore:n,confidenceScore:this.calculateConfidence(e,s),matchedKeywords:s.all,summary:this.generateSummary(a,s.all,r.score),sentiment:{score:r.score,comparative:r.comparative,tokens:r.tokens,words:r.words,positive:r.positive,negative:r.negative}};return("high-risk"===a||"harassment"===a)&&(i.crimePattern=this.detectCrimePattern(s)),this.cache.set(t,i),i}getCacheKey(e){return Buffer.from(e).toString("base64")}createEmptyResult(){return{category:"safe",toxicityScore:0,confidenceScore:0,matchedKeywords:[],summary:"Message is empty."}}detectKeywords(e){let t=e.toLowerCase(),r=this.threats.filter(e=>t.includes(e)),s=this.harassment.filter(e=>t.includes(e)),n=this.fraud.filter(e=>t.includes(e));return{threats:r,harassment:s,fraud:n,all:[...r,...s,...n]}}simpleSentimentAnalysis(e){let t=e.toLowerCase().split(/\s+/),r=t.filter(e=>this.positiveWords.includes(e)),s=t.filter(e=>this.negativeWords.includes(e)),n=r.length-s.length;return{score:n,comparative:n/t.length,tokens:t,words:[...r,...s],positive:r,negative:s}}calculateToxicityScore(e,t){let r;return r=0+30*e.threats.length+15*e.harassment.length+20*e.fraud.length,t.score<0&&(r+=2*Math.abs(t.score)),Math.min(100,Math.max(0,r))}determineCategory(e,t){return t.threats.length>0||t.fraud.length>0||e>60?"high-risk":e>30?"harassment":e>10?"mild":"safe"}calculateConfidence(e,t){let r=70;return t.all.length>0&&(r+=10),e.length>20&&(r+=10),e.length<5&&(r-=20),Math.min(100,Math.max(0,r))}generateSummary(e,t,r){let s=r<0?"negative":r>0?"positive":"neutral";return"safe"===e?`The message appears safe with ${s} sentiment.`:`Detected ${e} content. Found keywords: ${t.join(", ")||"None"}. Sentiment is ${s}.`}detectCrimePattern(e){return e.threats.length>0?{type:"Cyberbullying / Threat",description:"Message contains keywords associated with physical threats or severe bullying.",severity:"high",confidence:85}:e.fraud.length>0?{type:"Financial Fraud",description:"Message contains keywords associated with financial scams or fraud.",severity:"high",confidence:80}:e.harassment.length>0?{type:"Harassment",description:"Message contains harassing language.",severity:"medium",confidence:75}:void 0}}e.s(["MessageAnalyzer",()=>t])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__162c42d5._.js.map